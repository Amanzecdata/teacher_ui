<div class="container my-2">
    <div id="userListData">
        <h2>
            <b>Users</b>
        </h2>
        <div class="table-div">
            <table id="userTable" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>Joined</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Info</th>
                    </tr>
                </thead>
                <tbody id="body-data">
                    <!-- <tr>

                    <td>2020/04/25</td>
                    <td>Tiger Nixon</td>
                    <td>25</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/07/15</td>
                    <td>Timothy Mooney</td>
                    <td>28</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/04/10</td>
                    <td>Vivian Harrell</td>
                    <td>32</td>
                    <td>No</td>
                </tr>
                <tr>

                    <td>2020/08/17</td>
                    <td>Unity Butler</td>
                    <td>27</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/09/25</td>
                    <td>Zorita Serrano</td>
                    <td>34</td>
                    <td>No</td>
                </tr>
                <tr>

                    <td>2020/05/4</td>
                    <td>Michelle House</td>
                    <td>45</td>
                    <td>No</td>
                </tr>
                <tr>

                    <td>2020/03/25</td>
                    <td>Olivia Liang</td>
                    <td>41</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/10/25</td>
                    <td>Lael Greer</td>
                    <td>50</td>
                    <td>No</td>
                </tr>
                <tr>

                    <td>2020/03/13</td>
                    <td>Michelle House</td>
                    <td>37</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/07/19</td>
                    <td>Caesar Vance</td>
                    <td>39</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/07/20</td>
                    <td>Brielle Williamson</td>
                    <td>40</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/09/15</td>
                    <td>Cara Stevens</td>
                    <td>34</td>
                    <td>Yes</td>
                </tr>
                <tr>

                    <td>2020/04/25</td>
                    <td>Bradley Greer</td>
                    <td>22</td>
                    <td>No</td>
                </tr> -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="showUserInfo" style="display: none;" class="pt-3">
        <!-- <form id="placeForm">
            
        </form> -->
        <div>
            <button onclick="goBack()" class="btn">
                <i class="fa fa-chevron-left"></i> Back
            </button>
        </div>
        <h2 class="text-center">
            <b>User Information</b>
        </h2>
        <form class="px-2">

            <div class="form-group">
                <label for="uname">
                    <b>Name</b>
                </label>
                <input type="text" class="form-control" id="uname" placeholder="Name" readonly>
            </div>

            <div class="form-group">
                <label for="phone">
                    <b>Phone</b>
                </label>
                <input type="text" class="form-control" id="phone" placeholder="Phone" readonly>
            </div>

            <div class="form-group">
                <label for="joined">
                    <b>Joined</b>
                </label>
                <input type="text" class="form-control" id="joined" placeholder="Joined" readonly>
            </div>

            <div class="form-group">
                <label>
                    <b>Questions/Answers</b>
                </label>
                <div id="answerList">

                </div>
            </div>
        </form>


    </div>


</div>

<script>

    var user_list = [];

    $(document).ready(function () {

        get_user_list(function (users) {

            user_list = users;

            users.forEach((item, i) => {
                $('#body-data').append(`<tr>
                <td>${item.created_at}</td>
                <td>${item.name}</td>
                <td>${item.phone}</td>
                <td><button onclick="info('${i}')" class="btn btn-primary btn-edit"><i class="fa fa-info-circle"></i></button></td>
                </tr>`);
            });

            $('#userTable').DataTable();
        });
    });

    function goBack() {
        $("#userListData").show();
        $("#showUserInfo").hide();
    }

    function info(ind) {
        console.log(user_list[ind]);
        $("#userListData").hide();
        $("#showUserInfo").show();

        $("#uname").val(user_list[ind].name);
        $("#phone").val(user_list[ind].phone);
        $("#joined").val(user_list[ind].created_at);

        $("#answerList").empty();

        var html = "";

        user_list[ind].answers.forEach((item, i) => {
            html += `<div class="form-group">
                        <label>${i + 1}. ${item.question}</label>
                        <input type="text" class="form-control" value="${item.answer}" readonly>
                    </div>`
        });

        $("#answerList").append(html);

    }

</script>