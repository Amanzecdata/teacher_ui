<div class="container my-2">
    <div id="pacesListData">
        <h2>
            <b>Places</b>
        </h2>
        <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Address</th>
                    <th>Phone</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody id="body-data">
            </tbody>
        </table>
    </div>
    <div id="showEditForm" style="display: none;" class="pt-3">
        <!-- <form id="placeForm">
         
        </form> -->
        <button onclick="goBack()" class="btn"><i class="fa fa-chevron-left"></i> Back</button>
        <h2 class="text-center">
            <b>Update Place</b>
        </h2>
        <form class="px-2">

            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" placeholder="Title">
            </div>

            <div class="form-group">
                <label for="address">Addess</label>
                <input type="text" class="form-control" id="address" placeholder="Address">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <input type="text" class="form-control" id="description" placeholder="Description">
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="text" class="form-control" id="phone" placeholder="Phone">
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="latitude">Latitude</label>
                    <input type="text" class="form-control" id="latitude" placeholder="Latitude">
                </div>
                <div class="form-group col-md-6">
                    <label for="longitude">Longitude</label>
                    <input type="text" class="form-control" id="longitude" placeholder="Longitude">
                </div>
            </div>
            
            <div class="form-group">
                <label>Population List</label>
                <div id="populationList" class="form-group">
                    <!-- <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="gridCheck">
                        <label class="form-check-label" for="gridCheck">
                            Check me out
                        </label>
                    </div> -->
                </div>
            </div>
            <div class="form-group">
                <label>Services</label>
                <div id="services" class="form-group">
                </div>
            </div>
            <div class="form-group">
                <label for="other">Other Information</label>
                <textarea class="form-control" id="other" rows="3"></textarea>
            </div>
            <button type="button" class="btn btn-primary">Submit</button>
        </form>


    </div>
</div>

<script>

var places = [];
    $(document).ready(function () {


        list_services(function (place) {
            places = place.places
            place.places.forEach((item, i) => {
                $('#body-data').append(`<tr>
                <td>${item.title}</td>
                <td>${item.address}</td>
                <td>${item.phone}</td>
                <td><button onclick="edit('${i}')" class="btn btn-primary btn-edit"><i class="fa fa-pencil-square-o"></i></button></td>
                </tr>`);
            });

            $('#example').DataTable();
        });  

    });

    function goBack(){
        $("#pacesListData").show();
        $("#showEditForm").hide();
    }
    
    function edit(i){
        console.log(places[i]);
        var edit = document.getElementById("showEditForm");
        var tableData = document.getElementById("pacesListData");
        // if (edit.style.display === "none") {
        //     edit.style.display = "block";
        //     tableData.style.display = "none";
        // } else {
        //     edit.style.display = "none";
        //     tableData.style.display = "block";
        // }

        $("#pacesListData").hide();
        $("#showEditForm").show();

        $("#address").val(places[i].address);
        $("#title").val(places[i].title);
        $("#description").val(places[i].description);
        $("#latitude").val(places[i].latitude);
        $("#longitude").val(places[i].longitude);
        $("#phone").val(places[i].phone);
        $("#other").val(places[i].other_info);


        var populationItems = '';

        places[i].population_list.forEach(populationItem => {
           
        populationItems +=`<div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="${populationItem}">
                    <label class="form-check-label" for="${populationItem}">
                        ${populationItem}
                    </label>
                </div>`

        });

        $("#populationList").append(populationItems);


         var service = '';
         places[i].services_list.forEach(serviceListItem => {
           
            service += `<div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="${serviceListItem}">
                    <label class="form-check-label" for="${serviceListItem}">
                        ${serviceListItem}
                    </label>
                </div>`
            });

        $("#services").append(service);
    }
</script>